## Docker 安装

```bash
docker pull hiyouga/llamafactory:latest
docker run -itd -v ./LLaMA-Factory:/app -v ./models:/models  --name llamafactory --gpus=all --ipc=host hiyouga/llamafactory:latest /bin/bash
```

```bash
# 安装基础工具
apt install -y zsh
wget https://gitee.com/mirrors/oh-my-zsh/raw/master/tools/install.sh
chmod +x install.sh
./install.sh
rm -rf ./install.sh
source ~/.zshrc
git clone https://gitee.com/cheyujie/zsh-autosuggestions.git ${ZSH_CUSTOM:-~/.oh-my-zsh/custom}/plugins/zsh-autosuggestions
git clone https://gitee.com/cheyujie/zsh-syntax-highlighting.git ${ZSH_CUSTOM:-~/.oh-my-zsh/custom}/plugins/zsh-syntax-highlighting
vi ~/.zshrc
# plugins=(git zsh-autosuggestions zsh-syntax-highlighting pip)
source ~/.zshrc
```

```bash
# 安装依赖包
pip config set global.index-url https://pypi.tuna.tsinghua.edu.cn/simple
pip config set global.extra-index-url https://pypi.tuna.tsinghua.edu.cn/simple

pip install --upgrade pip
pip install bitsandbytes vllm
pip install --no-deps ring-flash-attn
cd /workspace
pip install ./flash_attn-2.7.4.post1+cu12torch2.6cxx11abiFALSE-cp311-cp311-linux_x86_64.whl
pip install tensorboard nvitop yunchang
```

```bash
# 训练
llamafactory-cli train /app/examples/train_lora/qwen3_lora_sft_ds2.yaml
```